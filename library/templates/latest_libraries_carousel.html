<section class="carousel-section">
  <div class="container">
    <h3 class="text-center mb-5 fw-bold">
      <span class="d-inline-block" style="font-size: 1.2em">ðŸŒŸ</span>
      Ãšltimas LibrerÃ­as Agregadas
      <br class="d-md-none" />
      <span
        class="badge text-white badge-nuevo mx-auto mt-2 mt-md-0 ms-md-3 d-inline-block"
        style="
          background: linear-gradient(135deg, #6366f1, #8b5cf6);
          font-size: 0.6em;
          padding: 8px 16px;
          vertical-align: middle;
        "
      >
        ðŸ”¥ NUEVO
      </span>
    </h3>

    <div
      id="latestLibrariesCarousel"
      class="carousel slide"
      data-bs-ride="carousel"
    >
      <!-- Indicadores -->
      <div class="carousel-indicators">
        {% for slide in slides %}
        <button
          type="button"
          data-bs-target="#latestLibrariesCarousel"
          data-bs-slide-to="{{ forloop.counter0 }}"
          class="{% if forloop.first %}active{% endif %}"
        ></button>
        {% endfor %}
      </div>

      <!-- Slides -->
      <div class="carousel-inner">
        {% for slide in slides %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="row g-4">
            {% for item in slide %}
            <div class="col-md-4">
              <div class="card library-card">
                {% if item.image %}
                <img
                  src="/media/{{ item.image }}"
                  class="card-img-top"
                  alt="{{ item.name }}"
                />
                {% else %}
                <img
                  src="/media/items/default.png"
                  class="card-img-top"
                  alt="Sin imagen"
                  style="object-fit: contain"
                />
                {% endif %}
                <div class="card-body">
                  <div class="d-flex flex-wrap mb-2">
                  {% for category in item.categories.all %}
                    <span class="category-badge me-2 mb-2">{{ category.name }}</span>
                  {% endfor %}
                </div>
                  <h5 class="card-title mt-2">{{ item.name }}</h5>
                  <p class="card-text">{{ item.description }}</p>
                  {% if item.url %}
                  <a
                    href="{{ item.url }}"
                    target="_blank"
                    class="btn btn-visit btn-sm"
                    >Visitar sitio â†’</a
                  >
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Controles -->
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#latestLibrariesCarousel"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#latestLibrariesCarousel"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Siguiente</span>
      </button>
    </div>
  </div>
</section>
